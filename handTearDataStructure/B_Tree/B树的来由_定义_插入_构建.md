- 二叉搜索树  AVL树  红黑树
使得查找,插入,删除操作的效率均降到了O(logn)级别
但是这三位通常是在内存中进行, 通常是先把数据全部加载到内存里面
在内存里进行处理, 数据量通常不会很大
而内存基本都在GB级别 比如说现在比较常见的4G 8G 或者16G
但是如果要处理超大规模数据, 大到内存根本存不下, 那么这个时候就需要用到硬盘
现在TB级别硬盘已经非常常见了
因为没办法把大规模的数据全部都读到内存里面,所以我们只能分批次的把需要处理的数据从硬盘调到内存里进一步处理
比如之前之前说到的AVL树来组织数据,那注意现在所有的数据并没有加载到内存里,而是全部存在硬盘当中,
因为数据量太大了,内存根本存不下,所以只能分批次的把需要处理的数据从硬盘调到内存里进一步处理

比如说咱们想访问根节点11,那么咱们就需要在硬盘里面找到这个节点的位置,然后将里面的信息读到内存当中进行进一步操作
为什么要读到内存里头呢?咱们不能直接在硬盘上操作这些数据吗
这里要注意 操作数据是需要CPU去执行相关的指令的, CPU是不能直接和硬盘进行交互的,硬盘里的数据必须先调到内存里头才能进一步和CPU进行交互--也就是对数据进行一些处理
上述过程称为一次硬盘访问也可以叫做一次硬盘IO -- 然而这个访问速度是非常慢的

- 
内存的单次访问是纳秒级的, 而硬盘访问是 ms级别的  
内存和硬盘的访问速度差异主要来源于它们的物理结构和工作原理。
内存（RAM）的访问速度：
物理结构：内存是一种基于半导体技术的易失性存储器，它由大量的晶体管和电容器组成。每个存储单元可以在纳秒级（10^-9秒）内被访问或改变。
工作原理：当CPU需要访问内存中的数据时，数据直接通过电信号在内存芯片上流动，速度非常快。由于内存是直接连接到CPU的，因此访问延迟很低，通常在几十纳秒的范围内。
硬盘的访问速度：
物理结构：传统的机械硬盘（HDD）由旋转的磁盘和机械臂组成。数据通过在磁盘表面读取或写入磁性信息来存储和检索。
工作原理：硬盘的访问时间包括寻道时间（机械臂移动到正确的磁道）、旋转延迟（等待磁盘旋转到正确位置）和数据传输时间。这些机械操作是毫秒级（10^-3秒）的，因此硬盘的整体访问速度较慢，通常在几毫秒到几十毫秒之间。
固态硬盘（SSD）的访问速度：
物理结构：SSD不包含机械部件，而是使用闪存（NAND闪存芯片）来存储数据。闪存存储单元是通过电荷来存储数据的，读取和写入速度相对更快。
工作原理：由于没有机械延迟，SSD的访问时间比传统机械硬盘快得多，通常在几十微秒（10^-6秒）到几百微秒之间，但仍比内存慢一个数量级。
总结：
内存的访问速度快，源于其纯电子的设计，没有机械延迟，数据可以直接通过电信号快速传递。
硬盘的访问速度慢，特别是机械硬盘，是因为它涉及物理运动（旋转和移动磁头），这些机械过程会导致较大的延迟。即使是速度较快的SSD，也由于闪存存储技术的限制，访问速度比内存慢。
- 

所以硬盘的访问时间成本是非常高的,所以要尽可能减少硬盘访问次数
那么咱们使用AVL或者红黑树这样的二叉平衡搜索树就不太合适了
为什么呢?
如果我们要找13首先要跟根节点11进行对比, 首先在硬盘上找到这个节点,然后将这个数据读到内存里,才能和13进行比较
那么硬盘就访问了一次,再次强调这个访问还会比较慢
对比之后发现13比11大,那么就要在11的右子树里找,那么就要访问硬盘上的11的右子树,然后再将这个数据读到内存里,才能和13进行比较
那么硬盘就访问了两次,这个访问还会比较慢
对比之后发现13比15小,那么就要在15的左子树里找,那么就要访问硬盘上的15的左子树,然后再将这个数据读到内存里,才能和13进行比较
那么硬盘就访问了三次,这个访问还会比较慢
我们发现每往下找一层,硬盘就会多访问一次,换句话说 硬盘访问次数 和 树高 正相关的


每次从硬盘调数据到内存里,都需要进行磁盘I/O操作,这个操作是非常耗时的,因为涉及到磁盘的读写
所以如果每次都从硬盘调数据到内存里,那么效率就会非常低,
所以我们需要一种数据结构,减少树高,从而减少硬盘访问次数(也就减少耗时的硬盘操作)
使得每次从硬盘调数据到内存里的时候,能够快速找到需要处理的数据,这样就可以大大提高效率
那么B树就应运而生
和之前讲的AVL树或者是红黑树最大的不同
就是每个节点他不只有一个元素, 而且也不一定只有两个分叉,其实就是一个多叉平衡搜索树
这样每个节点就可以保存更多的数据,可以有很多阶

除了上面带有元素的节点之外,
最下面还有一层空结点,
我们把包含数据的结点称为 内部结点
下面的空结点称为 外部节点(失败节点) -- 并没有任何信息,他们只是意味着查找失败

有的地方会把下面的失败结点叫做叶子节点
也有的地方会把内部节点的最后一层叫做叶子节点
这边统一称呼内部节点的最后一层为叶子节点


================================================================================
=================================================================================




B树的来由
B树（Balanced Tree）是一种自平衡的树数据结构，主要用于磁盘或其他存储设备中组织和维护有序数据。这种数据结构最早由Rudolf Bayer和Edward M. McCreight在1972年提出。

背景：

磁盘I/O操作效率：在B树诞生之前，磁盘I/O是数据库系统中的主要瓶颈。传统的二叉树虽然在内存中操作效率较高，但对于磁盘上的数据操作，其效率受到极大的制约。每次访问节点都可能涉及磁盘页的读写，这在大规模数据处理中尤为明显。
平衡树结构的需求：在大数据集的存储和检索中，需要一个能够保持平衡的多路搜索树结构，确保树的高度尽可能低，以减少访问磁盘页的次数。
B树应运而生，它是一种广泛用于数据库和文件系统的平衡树结构，可以有效减少磁盘I/O操作，提高数据访问效率。

B树的定义
B树是一种通用的自平衡树数据结构，每个节点可以有多个子节点和多个关键字。B树的特点如下：

节点的关键字数目：每个节点存储 t-1 到 2t-1 个关键字，其中 t 是B树的阶（t 为最小度数）。根节点除外，根节点至少包含1个关键字。

子节点数目：每个节点有 t 到 2t 个子节点。非叶子节点有 k 个关键字时，恰好有 k+1 个子节点。

所有叶子节点处在同一层：B树的所有叶子节点都处在同一层。

关键字的排序：每个节点中的关键字是有序排列的，满足二叉搜索树的性质。

树的高度较低：由于B树的多路性，树的高度相对较低，通常为O(log_t n)，这使得B树的查找、插入和删除操作都可以在对数时间内完成。

B树的插入
插入操作是B树的重要操作，需要确保在插入新关键字后，树的平衡性和B树的定义不被破坏。

查找插入位置：

从根节点开始，依次比较关键字，确定要插入的叶子节点位置。
如果找到相应的叶子节点并且有空位，则直接插入。
节点分裂：

如果插入导致某个节点的关键字数超过 2t-1，则需要对该节点进行分裂。
分裂操作将节点的关键字一分为二，并将中间的关键字提升到父节点。
如果父节点也已满，则继续分裂并递归处理，直到树根为止。
如果根节点分裂，树的高度将增加1。
B树的构建
构建B树的过程就是不断进行插入操作，并在必要时进行节点分裂。以下是一个简单的B树构建示例：

初始化：从空树开始，创建一个B树。
插入关键字：依次将每个关键字插入到B树中，并进行调整。
平衡调整：在插入过程中，随时检查节点的关键字数，并在超出范围时进行节点分裂。
面试常问问题
B树的优点是什么？为什么在数据库中使用B树？

B树具有自平衡特性，能够保证数据的有序性和较低的树高，减少磁盘I/O操作，因此特别适合大规模数据的管理和检索。
B树与B+树的区别？

B+树是B树的一种变体，其中所有关键字都存储在叶子节点，内部节点只存储指向子节点的指针。这使得B+树的查询操作更为高效，适合范围查询。
B树的插入和删除操作复杂度是多少？

插入和删除的时间复杂度为O(log_t n)，其中 t 是B树的阶数。
B树的分裂操作是如何进行的？

分裂操作将满节点的关键字一分为二，并将中间关键字提升到父节点。如果父节点也满，则继续向上分裂，直到根节点。
如何选择B树的阶数（t）？

B树的阶数取决于磁盘页的大小和每个关键字的大小。通常，t 的选择使得节点大小与磁盘页大小匹配，以优化磁盘I/O。

========================================================================
========================================================================

B树是满足 3 个特性的
分别是 
    平衡, -- 所有的叶节点都在同一层
    有序, -- 结点内有序, 任一元素的左子树都小于它,右子树都大于它

    多路  -- 对于m阶B树的结点:
                    最多: m个分支, m - 1个元素
                    最少: 根节点: 2个分支, 1个元素
                          非根节点: (m/2)个分支, (m/2) - 1个元素

========================================================================
========================================================================






