在进行TCP通信的时候, 

会涉及到 粘包 以及 心跳包

粘包的解决方案有两种:

1. 协议 -》  HTTP / WebSocket ---- 都是应用层的传输协议

2. 消息头 + 消息体

心跳包的机制:

心跳包是一种用于维护网络连接稳定性和检测连接状态的机制。它的主要功能是通过周期性地发送小的数据包（称为“心跳包”），让通信双方能够确认连接的状态，及时发现并处理可能出现的连接断开或网络故障。

心跳包的主要功能

连接保活：通过定期发送心跳包，可以避免由于长时间没有数据传输而导致的连接超时或被网络设备（如防火墙、路由器）关闭。

检测连接状态：心跳包可以用来检测对方是否在线。如果在预定时间内没有收到对方的心跳包响应，发送方可以认为连接已经断开，从而采取相应的重连或其他措施。

故障检测与恢复：心跳包机制可以快速发现网络异常（如网络中断、对方宕机等），从而能够及时进行故障处理，比如重新建立连接或切换到备用路径。

心跳包的工作流程

发送心跳包：一方（通常是客户端或服务器）按照一定的时间间隔（如每隔几秒或几十秒）发送一个心跳包到对方。

接收与响应：接收方在收到心跳包后，通常会返回一个确认包（ACK），表示自己在线并且连接正常。

超时处理：如果发送方在规定的时间内没有收到心跳包的确认，可能会认为连接已经中断，并触发超时处理逻辑，例如尝试重新连接或发送告警信息。

实现心跳包的常见方法:

TCP Keepalive：TCP协议本身支持Keepalive选项，可以配置TCP连接的保活时间间隔和重试次数，达到类似心跳包的功能。

应用层心跳包：应用程序可以自己实现心跳包机制，通过UDP或TCP定期发送应用层的心跳消息来检测连接状态。

心跳包的应用场景
即时通讯应用：如微信、QQ等，在客户端和服务器之间维护长连接，确保消息能够实时到达。

物联网设备：物联网中的设备需要定期与服务器通信，确保设备的在线状态和数据传输的可靠性。

分布式系统：在分布式系统中，心跳包被用于节点间的健康检查，保证各节点的实时在线状态和系统的稳定运行。



