TCP---
序号 (Sequence Number)
占 4 字节
首先, 在传输过程的每一个字节都会有一个编号

在建立连接后, 序号代表: 这一次传给对方的TCP数据部分的第一个字节的编号
比如，如果序列号为1000，且发送了100字节的数据，则这些数据的序列号范围是1000到1099。

序号是循环的, 最大值为 2^32 - 1。当序列号达到最大值后，下一个序列号将从0开始。

序列号是递增的
        序列号通常是递增的，但需要注意：
            递增的单位：序列号的递增是基于传输的数据字节数。例如，如果发送了一个500字节的TCP段，而该段的初始序列号是1000，那么下一个TCP段的序列号将是1500。
            SYN和FIN：当连接建立（使用SYN标志）或关闭（使用FIN标志）时，序列号会增加1，即使没有实际的数据字节传输。

初始序列号（Initial Sequence Number, ISN）
补充：当TCP连接建立时，双方会各自选择一个初始序列号（ISN），通常是一个随机数。
这个ISN作为后续数据传输的起始序列号，用于防止连接混淆和重传的旧数据包干扰。

================================================================================================

确认号 (Acknowledge Number)是一个32位字段，占用4字节
占 4 字节
确认号代表: 它用于确认接收方已经成功接收到的数据，并告知发送方下一次期望接收到的数据的第一个字节的序列号。
确认号是循环的, 最大值为 2^32 - 1  当确认号达到最大值后，下一个确认号将从0开始。

确认号是递增的
        确认号确实是递增的，但它的递增并不是逐字节的，而是根据实际接收到的数据量进行递增。具体来说：
        数据的字节数：
                确认号的递增是基于成功接收到的数据字节数。如果接收方成功接收了500字节的数据，那么确认号将增加500。
        乱序数据：
                如果数据包乱序到达，接收方只能确认按顺序收到的部分，其确认号将对应到按序接收的最后一个字节之后的第一个字节。

延迟确认：
补充：TCP实现中通常会使用一种叫做“延迟确认”（Delayed ACK）的技术。
它并不会立即确认每个接收到的数据包，而是可能会等待一小段时间，或者在有数据要发送时一起发送确认。这可以减少网络上的ACK报文数量，优化性能。

=====================================================================================================================


窗口 (Window)
占 2 字节
1. 窗口大小的基本概念
正确：TCP的窗口大小（Window Size）字段占用2字节，因此它的最大值为2^16 - 1（即65535字节）。
该字段表示接收方当前可以接收的字节数，即接收缓冲区的可用空间。

2. 窗口大小的作用
正确：窗口大小表示接收方的接收能力，它告诉发送方接收方还能接收多少字节的数据。
在窗口未满之前，发送方可以继续发送数据，而无需等待确认。

3. 窗口大小是循环的
错误：窗口大小并不是循环的。
虽然窗口大小字段的最大值是65535，但它表示的是一个有限的、固定范围内的值，不能循环使用。窗口大小的变化取决于接收方的缓冲区状态。

4. 窗口大小的变化
窗口大小并不是简单地随每接收一个字节而递减1。
窗口大小的调整是由接收方根据其缓冲区的使用情况进行动态变化的。
窗口缩小：当接收方的缓冲区开始填满时，窗口大小会缩小。接收方会在ACK中报告较小的窗口大小，告诉发送方它的接收能力正在减少。
窗口扩大：当接收方从缓冲区中读取数据并释放空间后，窗口大小会扩大。接收方会在后续的ACK中报告一个更大的窗口大小，允许发送方发送更多的数据。

5. 窗口大小的动态调整
窗口缩减和扩大：窗口大小是动态调整的，取决于接收方的缓冲区状态。
例如，接收方处理并释放了缓冲区中的一部分数据后，会在下一个ACK中报告更大的窗口大小，允许发送方继续发送更多数据。
零窗口机制：在某些情况下，如果接收方的缓冲区完全满了，它会将窗口大小设置为0，告知发送方停止发送数据，直到接收方有空间处理更多数据为止。

6. 滑动窗口协议
补充：TCP使用滑动窗口协议来管理流量控制。
发送方在发送数据时，会根据接收方报告的窗口大小来决定发送的字节数。当接收到的ACK确认了某些字节的数据，窗口会向前滑动，允许发送更多的数据。

总结
窗口大小字段确实表示接收方的接收能力，但它并不是简单地逐字节减少或循环使用。
相反，窗口大小是动态变化的，反映了接收方缓冲区的实际使用情况。
发送方通过滑动窗口协议来调节数据发送的速度和数量，确保不会超出接收方的处理能力。




