5. gcc与g++
关于对gcc和g++很多人的理解都是比较片面的或者是对二者的理解有一些误区，下边从三个方面介绍一下二者的区别:

在代码编译阶段（第二个阶段）:

后缀为 .c 的，gcc 把它当作是C程序，而 g++ 当作是 C++ 程序
后缀为.cpp的，两者都会认为是 C++ 程序，C++ 的语法规则更加严谨一些
g++会调用gcc，对于C++代码，两者是等价的, 也就是说 gcc 和 g++ 都可以编译 C/C++代码
在链接阶段（最后一个阶段）:

gcc 和 g++ 都可以自动链接到标准C库
g++ 可以自动链接到标准C++库, gcc如果要链接到标准C++库需要加参数 -lstdc++
关于 __cplusplus宏的定义

g++ 会自动定义__cplusplus宏，但是这个不影响它去编译C程序

gcc 需要根据文件后缀判断是否需要定义 __cplusplus 宏 （规则参考第一条）

综上所述：

不管是 gcc 还是 g++ 都可以编译 C 程序，编译程序的规则和参数都相同
g++可以直接编译C++程序， gcc 编译 C++程序需要添加额外参数 -lstdc++
不管是 gcc 还是 g++ 都可以定义 __cplusplus宏

# 编译 c 程序
$ gcc test.c -o test	# 使用gcc
$ g++ test.c -o test	# 使用g++

# 编译 c++ 程序
$ g++ test.cpp -o test              # 使用g++
$ gcc test.cpp -lstdc++ -o test     # 使用gcc


__cplusplus 是一个预定义宏，在 C++ 编译器中用于指示当前编译环境是 C++ 语言，并且它的值可以用来检测编译器所支持的 C++ 标准的版本。

__cplusplus 宏的定义
宏值：__cplusplus 宏的值是一个整数，表示编译器支持的 C++ 标准的版本。这个值随着 C++ 标准的演进而变化。
C++ 标准对应的宏值
C++98/C++03：值为 199711L。
C++11：值为 201103L。
C++14：值为 201402L。
C++17：值为 201703L。
C++20：值为 202002L。
C++23：值为 202300L（在某些编译器中可能还未完全支持）。
示例代码
你可以在代码中使用 __cplusplus 宏来编写条件编译指令，以确保代码的兼容性和针对不同 C++ 标准版本的处理。例如：

```cpp
#include <iostream>

int main() {
#if __cplusplus >= 201703L
    std::cout << "C++17 or later\n";
#else
    std::cout << "Older than C++17\n";
#endif
    return 0;
}
在这个示例中，如果编译器支持 C++17 或更高版本，程序将输出 "C++17 or later"；否则，将输出 "Older than C++17"。

用途和意义
版本检测：帮助开发人员根据不同的 C++ 标准进行条件编译，以确保程序在不同的编译器和标准下能够正常工作。

特性检测：与 C++ 标准的特性检测结合使用，编写更具兼容性和扩展性的代码。例如，可以根据不同的 C++ 标准启用或禁用某些功能。

编译器兼容性：允许在代码中包含特定于标准的实现，确保不同编译器和标准版本下的行为一致。

使用 __cplusplus 可以使代码更加灵活和兼容，特别是在处理跨多个 C++ 标准和编译器的项目时。




