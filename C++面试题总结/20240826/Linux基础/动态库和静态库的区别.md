动态库和静态库是软件开发中用于组织和重用代码的两种不同方式。它们在编译和链接过程中表现出不同的行为，适用于不同的场景。

静态库（Static Library）
概念：

静态库是一组函数或对象的集合，这些函数在编译时直接嵌入到可执行文件中。通常以 .lib（Windows）或 .a（Linux/Unix）为扩展名。
优点：

独立性：编译后的可执行文件包含所有必要的代码，不依赖外部库。因此，部署和分发较为简单。
运行速度：由于不需要在运行时加载库，启动和执行速度较快。
缺点：

文件体积大：静态链接会使得可执行文件体积增大，因为所有相关库的代码都被包含在其中。
更新困难：如果库发生更新，需要重新编译所有依赖该库的应用程序。
动态库（Dynamic Library）
概念：

动态库是在程序运行时加载的库文件，通常以 .dll（Windows）或 .so（Linux/Unix）为扩展名。动态库不直接嵌入到可执行文件中，而是在运行时由操作系统加载。
优点：

节省空间：动态库在不同程序间可以共享，因此可执行文件较小，且多个程序可以共享同一个动态库，节省系统资源。
更新方便：更新动态库无需重新编译依赖的程序，只需替换库文件即可。
缺点：

依赖性强：运行时需要确保动态库存在，否则程序无法启动。常见的依赖问题可能导致“DLL地狱”。
加载开销：程序启动时需要加载动态库，会带来一定的时间开销。
选择时的考虑
静态库适合需要高性能、单独部署或不频繁更新的应用。
动态库适合共享资源、易于更新和维护的系统，特别是在现代操作系统中，它们普遍用于减少内存占用和系统更新的复杂性。

==================================================================================

在Linux上，从预处理到生成可执行程序的过程中，可以使用以下命令来分别执行各个步骤：

1. 预处理（Preprocessing）
预处理器将处理所有的预处理指令（如#include、#define等），生成纯C代码。这一步使用gcc的-E选项：

gcc -E source.c -o source.i
source.c: 输入的C源代码文件。
source.i: 输出的预处理后的文件。

2. 编译（Compilation）
编译器将预处理后的C代码转换为汇编代码。这一步使用gcc的-S选项：

gcc -S source.i -o source.s
source.s: 输出的汇编代码文件。

3. 汇编（Assembly）
汇编器将汇编代码转换为目标代码（机器码），生成二进制目标文件。这一步使用gcc的-c选项：

gcc -c source.s -o source.o
source.o: 输出的目标文件。

4. 链接（Linking）
链接器将所有目标文件和所需的库文件链接起来，生成最终的可执行文件：

gcc source.o -o executable
executable: 最终生成的可执行文件。
总结：
预处理：gcc -E source.c -o source.i
编译：gcc -S source.i -o source.s
汇编：gcc -c source.s -o source.o
链接：gcc source.o -o executable
每一步都可以通过gcc命令独立完成，最终得到一个可以在Linux上运行的可执行程序。

================================================================================

动态链接器（Dynamic Linker），又称为动态加载器，是操作系统中的一部分，
负责在程序运行时加载和链接动态库（如 .so 文件）。
在Linux系统中，动态链接器是一个关键组件，
它使得动态库能够在多个应用程序之间共享，从而节省内存并允许库的独立更新。

动态链接器的作用
加载动态库：当一个可执行程序启动时，动态链接器会根据程序的需要加载所依赖的动态库。
它会根据可执行文件中的信息和系统配置，定位并加载这些库。

符号解析：动态链接器需要解析程序中使用的所有符号（函数和变量名），确保它们能够正确链接到动态库中的实现。这包括查找符号在动态库中的位置并将程序中的符号引用解析为实际地址。

延迟加载：动态链接器支持延迟加载技术，这意味着某些库可以在程序运行的过程中按需加载，而不是在程序启动时全部加载。这种方式可以加快程序启动速度。

库的版本管理：动态链接器负责处理库的版本兼容性问题，以确保程序能正确使用与之兼容的库版本。

常见的动态链接器
在Linux上，常见的动态链接器包括：

ld.so：负责加载和链接标准C库及其相关的依赖库。
ld-linux.so：这是Linux系统中主要的动态链接器，通常位于 /lib 或 /lib64 目录下。它在启动时会被内核加载，并负责处理程序运行时所需的所有动态链接。
示例
当你在Linux上运行一个动态链接的程序时，例如执行：

./my_program
系统会首先调用动态链接器，如 /lib64/ld-linux-x86-64.so.2，来加载程序所需的动态库，解析符号，并完成程序的链接。只有在这些步骤完成之后，程序才会开始执行它的 main() 函数。


配置动态链接器

/etc/ld.so.conf：配置动态链接器搜索动态库的路径。
LD_LIBRARY_PATH：环境变量，用于临时指定动态链接器的搜索路径。
ldconfig：用于更新动态链接器的缓存，以加快动态库的查找速度。
通过动态链接器，Linux系统可以高效地管理库和程序之间的依赖关系，
使得应用程序的开发和部署更加灵活。

====================================================================================

3. 优缺点
3.1 静态库
优点：

静态库被打包到应用程序中加载速度快
发布程序无需提供静态库，移植方便
缺点：

相同的库文件数据可能在内存中被加载多份, 消耗系统资源，浪费内存
库文件更新需要重新编译项目文件, 生成新的可执行程序, 浪费时间。



3.2 动态库
优点：

可实现不同进程间的资源共享
动态库升级简单, 只需要替换库文件, 无需重新编译应用程序
程序猿可以控制何时加载动态库, 不调用库函数动态库不会被加载
缺点：

加载速度比静态库慢, 以现在计算机的性能可以忽略
发布程序需要提供依赖的动态库



